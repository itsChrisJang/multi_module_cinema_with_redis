# Redis_project  

```bash
redis-project/
β”‚β”€β”€ application/      # Use Case (λΉ„μ¦λ‹μ¤ λ΅μ§)
β”‚   β”β”€β”€ src/main/java/com/example/application/
β”‚   β”‚   β”β”€β”€ usecase/  # μ μ¤μΌ€μ΄μ¤ μ •μ
β”‚   β”‚   β”β”€β”€ service/  # μ„λΉ„μ¤ κ³„μΈµ
β”‚   β”‚   β”β”€β”€ dto/      # DTO ν΄λμ¤
β”‚   β”‚   β”β”€β”€ event/    # μ΄λ²¤νΈ ν•Έλ“¤λ¬ (Kafka, Redis Pub/Sub λ“±)
β”‚β”€β”€ domain/           # Core Business Logic (μμν• λ„λ©”μΈ)
β”‚   β”β”€β”€ src/main/java/com/example/domain/
β”‚   β”‚   β”β”€β”€ model/    # λ„λ©”μΈ μ—”ν‹°ν‹°
β”‚   β”‚   β”β”€β”€ repository/  # λ„λ©”μΈ λ ν¬μ§€ν† λ¦¬ μΈν„°νμ΄μ¤
β”‚β”€β”€ infrastructure/   # μ™Έλ¶€ μΈν”„λΌ (DB, Redis, API)
β”‚   β”β”€β”€ src/main/java/com/example/infrastructure/
β”‚   β”‚   β”β”€β”€ repository/  # JPA, MyBatis, Redis κµ¬ν„μ²΄
β”‚   β”‚   β”β”€β”€ config/   # Spring μ„¤μ • κ΄€λ ¨
β”‚β”€β”€ presentation/     # Controller, Web κ΄€λ ¨ μ²λ¦¬
β”‚   β”β”€β”€ src/main/java/com/example/presentation/
β”‚   β”‚   β”β”€β”€ controller/  # API μ—”λ“ν¬μΈνΈ
β”‚   β”‚   β”β”€β”€ handler/     # μμ™Έ ν•Έλ“¤λ¬
β”‚β”€β”€ config/            # κ³µν†µ μ„¤μ • (yml, security μ„¤μ •)
β”‚β”€β”€ build.gradle
β”‚β”€β”€ settings.gradle
```

## Multi Module

μ΄ ν”„λ΅μ νΈλ” **λ©€ν‹° λ¨λ“(Multi Module)** κµ¬μ΅°λ¥Ό ν™μ©ν•μ—¬ **κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬(Separation of Concerns, SoC)**μ™€ **μ μ§€λ³΄μμ„± ν–¥μƒ**μ„ λ©ν‘λ΅ ν•©λ‹λ‹¤. κ° λ¨λ“μ€ νΉμ • κΈ°λ¥μ„ λ‹΄λ‹Ήν•λ©° λ…λ¦½μ μΌλ΅ κ°λ°, ν…μ¤νΈ λ° λ°°ν¬ν•  μ μμµλ‹λ‹¤.

### π“ **λ©€ν‹° λ¨λ“ κµ¬μ„±**
- **application**: λΉ„μ¦λ‹μ¤ λ΅μ§ λ° μ μ¤μΌ€μ΄μ¤ μ •μ
- **domain**: ν•µμ‹¬ λ„λ©”μΈ λ¨λΈ λ° λ„λ©”μΈ λ΅μ§ ν¬ν•¨
- **infrastructure**: λ°μ΄ν„°λ² μ΄μ¤, Redis, API μ—°λ™ λ“± μ™Έλ¶€ μ‹μ¤ν…κ³Όμ μ—°κ²°
- **presentation**: API μ—”λ“ν¬μΈνΈ λ° μ‚¬μ©μ μ”μ²­ μ²λ¦¬
- **config**: ν”„λ΅μ νΈ κ³µν†µ μ„¤μ • λ° λ³΄μ• κ΄€λ ¨ μ„¤μ • κ΄€λ¦¬

κ° λ¨λ“μ€ λ…λ¦½μ μΌλ΅ ν…μ¤νΈ κ°€λ¥ν•λ©°, λ³€κ²½μ΄ ν•„μ”ν•  κ²½μ° νΉμ • λ¨λ“λ§ μμ •ν•μ—¬ **μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄μ— μν–¥μ„ μµμ†ν™”**ν•  μ μμµλ‹λ‹¤.

### π“ **Gradle λ©€ν‹° λ¨λ“ μ„¤μ •**
`settings.gradle`
```gradle
rootProject.name = 'redis-project'
include ':movie'
include ':schedule'
include ':screen'
include 'reservation'
```

---

## Architecture

μ΄ ν”„λ΅μ νΈλ” **DDD(Domain-Driven Design)** μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„, **Hexagonal Architecture (Ports and Adapters)**λ¥Ό κΈ°λ°μΌλ΅ μ„¤κ³„λμ—μµλ‹λ‹¤.

### π“ **μ•„ν‚¤ν…μ² κ°μ”**
```
β”‚β”€β”€ application/      # Use Case (λΉ„μ¦λ‹μ¤ λ΅μ§)
β”‚β”€β”€ domain/          # Core Business Logic (μμν• λ„λ©”μΈ)
β”‚β”€β”€ infrastructure/   # μ™Έλ¶€ μΈν”„λΌ (DB, Redis, API)
β”‚β”€β”€ presentation/     # Controller, Web κ΄€λ ¨ μ²λ¦¬
```

### π“ **κ° κ³„μΈµ μ—­ν• **
- **Domain (λ„λ©”μΈ κ³„μΈµ)**  
  - ν”„λ΅μ νΈμ ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ„ ν¬ν•¨ν•λ” μμν• λ„λ©”μΈ λ¨λΈ
  - **μμ΅΄μ„± μ—†μ (Zero Dependency)** β†’ JPA, Spring λ“± κΈ°μ  μ¤νƒκ³Ό λ¶„λ¦¬
  - `model/` ν΄λ”μ— μ—”ν‹°ν‹° λ° VO(Value Object) μ •μ
  - `repository/` μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μμ†μ„± κ³„μΈµκ³Όμ μμ΅΄μ„± λ¶„λ¦¬
  
- **Application (μ• ν”λ¦¬μΌ€μ΄μ… κ³„μΈµ)**  
  - λ„λ©”μΈ λ΅μ§μ„ μ• ν”λ¦¬μΌ€μ΄μ… μ”κµ¬μ‚¬ν•­μ— λ§κ² μ΅°ν•©
  - `usecase/` ν΄λ”μ—μ„ μ μ¤μΌ€μ΄μ¤λ¥Ό μ •μν•κ³ , μ„λΉ„μ¤ λ΅μ§μ„ λ‹΄λ‹Ή
  - DTO λ° μ΄λ²¤νΈ ν•Έλ“¤λ¬ (Kafka, Redis Pub/Sub λ“±) ν¬ν•¨
  
- **Infrastructure (μΈν”„λΌ κ³„μΈµ)**  
  - λ°μ΄ν„°λ² μ΄μ¤, Redis, μ™Έλ¶€ APIμ™€μ ν†µμ‹  λ‹΄λ‹Ή
  - `repository/` ν¨ν‚¤μ§€μ—μ„ JPA, MyBatis λ“±μ κµ¬ν„μ²΄ κ΄€λ¦¬
  - `config/` ν΄λ”μ—μ„ Spring μ„¤μ • κ΄€λ ¨ νμΌ ν¬ν•¨
  
- **Presentation (ν”„λ μ  ν…μ΄μ… κ³„μΈµ)**  
  - API μ—”λ“ν¬μΈνΈ μ κ³µ λ° μ”μ²­μ„ μ²λ¦¬ν•λ” μ»¨νΈλ΅¤λ¬ ν¬ν•¨
  - `controller/` ν΄λ”μ—μ„ REST API κµ¬ν„
  - `handler/`μ—μ„ μμ™Έ μ²λ¦¬ λ° κ³µν†µ μ‘λ‹µ μ²λ¦¬ λ‹΄λ‹Ή
  
### π“ **ERD κΈ°λ° λ¨λ“ λ¶„λ¦¬**
μ΄ ν”„λ΅μ νΈμ λ¨λ“μ€ **ERD ν…μ΄λΈ”μ„ κΈ°μ¤€μΌλ΅ λ¶„λ¦¬**λμ–΄ μμΌλ©°, κ° ν…μ΄λΈ”μ€ μ•„λμ™€ κ°™μ΄ λ€μ‘λ©λ‹λ‹¤.

#### **Domain λ¨λ“** (λ„λ©”μΈ λ¨λΈ μ •μ)
- `SEAT`
- `SCREEN`
- `SCHEDULE`
- `RESERVATION`
- `MOVIE`

#### **Application λ¨λ“** (λΉ„μ¦λ‹μ¤ λ΅μ§ λ° μ μ¤μΌ€μ΄μ¤ μ •μ)
- μΆμ„ μμ•½ λ° μƒνƒ κ΄€λ¦¬ (`SEAT`, `RESERVATION`)
- μƒμ μ¤μΌ€μ¤„ μƒμ„± λ° κ΄€λ¦¬ (`SCHEDULE`, `MOVIE`)
- μƒμκ΄€ κ΄€λ¦¬ (`SCREEN`)

#### **Infrastructure λ¨λ“** (λ°μ΄ν„°λ² μ΄μ¤, Redis, API μ—°λ™)
- JPA κΈ°λ°μ Repository κµ¬ν„ (`SEAT`, `SCREEN`, `SCHEDULE`, `RESERVATION`, `MOVIE` μ €μ¥ λ° μ΅°ν)
- Redis μΊμ‹± μ μ© (μλ§¤ μƒνƒ μΊμ‹±)
- μ™Έλ¶€ API μ—°λ™ (μν™” μ •λ³΄ μ κ³µ API)

#### **Presentation λ¨λ“** (API μ—”λ“ν¬μΈνΈ λ° μ”μ²­ μ²λ¦¬)
- μΆμ„ μλ§¤ API (`/reservation`)
- μƒμ μ¤μΌ€μ¤„ μ΅°ν API (`/schedule`)
- μν™” λ©λ΅ λ° μƒμ„Έ μ΅°ν API (`/movie`)
- μƒμκ΄€ μ •λ³΄ μ΅°ν API (`/screen`)

### π“ **μ•„ν‚¤ν…μ² μ¥μ **
β… **κ΄€μ‹¬μ‚¬ λ¶„λ¦¬** β†’ λ„λ©”μΈ, μ• ν”λ¦¬μΌ€μ΄μ…, μΈν”„λΌ, ν”„λ μ  ν…μ΄μ…μ„ λ…ν™•ν κµ¬λ¶„ν•΄ μ μ§€λ³΄μ μ©μ΄  
β… **μ μ—°μ„± & ν™•μ¥μ„±** β†’ νΉμ • λ¨λ“μ„ λ…λ¦½μ μΌλ΅ ν…μ¤νΈν•κ±°λ‚ λ³€κ²½ κ°€λ¥  
β… **κΈ°μ  λ…λ¦½μ„± μ μ§€** β†’ `domain` κ³„μΈµμ€ κΈ°μ  μ¤νƒμ— μμ΅΄ν•μ§€ μ•μ  
β… **ν…μ¤νΈ μ©μ΄μ„±** β†’ λ„λ©”μΈ λ° μ• ν”λ¦¬μΌ€μ΄μ… λ΅μ§μ„ Mockingν•μ—¬ μ λ‹› ν…μ¤νΈ κ°€λ¥  

μ΄μ™€ κ°™μ€ κµ¬μ΅°λ¥Ό ν†µν•΄ **ν™•μ¥ κ°€λ¥ν•κ³  μ μ§€λ³΄μν•κΈ° μ‰¬μ΄ μ• ν”λ¦¬μΌ€μ΄μ…**μ„ κµ¬μ¶•ν•  μ μμµλ‹λ‹¤.


## Table Design
![img](./image/erd.png)

#### μ°Έκ³  
[μ°μ•„ν• κΈ°μ λΈ”λ΅κ·Έ - λ©€ν‹°λ¨λ“ μ„¤κ³„ μ΄μ•ΌκΈ° with Spring, Gradle](https://techblog.woowahan.com/2637/)